# COMANDOS UTILES

- sudo visudo -c : Check de sintaxis del sudoers
- sudo visudo -f : Editar un arhivo sudoers concreto
- dig : Buscar dominios
- sudo crontab -l -uroot : Ver crontab del usuario root
- ps faux : Ver procesos en ejecucion y consumo
- dpkg --get-selections : Saber paquetes instalados
- curl ifconfig.me : Saber ip publica del equipo
- nl : Como cat pero numerando las lineas
- ls -lat : Lista y pone los mas nuevos al principio
- grep -r : Buscar recursivamente
- dpkg -s : Saber version del servicio
- du -sh : Saber espacio ocupado
- vim diff : Comparar archivos en vim
- dpkg -x : Ver contenido de paquete .deb instalado
- update db && locate : Buscar
- ssh -i /home${USER}/.ssh/.key -p 22 ip_nombre_host : Usar una rsa concreta, con un puerto especifico para conectarse a un equipo
- watch : Lanzar comando cada 2 segundos, se puede configurar
- grep -v : Busca y muestra todo menos lo indicado
- traceroute : Ver el camino que sigue una conexion
- netstat -a -l :
- find / -name *.txt : Busca los archivos en raiz que terminan en .txt
- who : Saber usuarios conectados al equipo
- route : Saber salida a internet
- printenv : Ver todas la variables de entorno
- ln -sfn
- find /var/log/ -type f -ctime +90 -delete&>/dev/null : Busca dentro del directorio indicado todos los archivos que tengan mas de 90 dias y los elimina
- sudo update-alternatives --config editor : Elegir con que editor abrir el sudoers
- ssh-keygen : Crear par de claves ssh
- sudo useradd Alberto -m -g Administrador -G Profesores -s /bin/bash: Crea el usuario Alberto, le crea el directorio home, lo agrega al grupo principar Administrador, lo agrega al grupo secundario Profesores, y le asigna que su shell por defecto sea bash
- sudo passwd Alberto : Cambiar la password para el usuario Alberto
- sudo usermod -aG sudo Alberto : Dar permisos de sudo al usuario Alberto
- sudo chage -M 30 -W10 Alberto : La password del usuario Alberto se caduca cada 30 dias, y le avisa 10 dias antes de que tiene que cambiar las password
- sudo netstat -tulpn
- tail -f *
- grep -ril
- netstat -a
- netstat -a --numeric-port | grep
- 2>/dev/null : Elimina la salida de error
- sudo iptables -L --line-numbers : Muestra las lineas en el iptables
- ls -R : Lista de manera recursiva
- sudo apt-key list : Saber keys de los paquetes instalados para poder automatizar procesos
- tcpdump : Paquetes in / out 
- netstat -nr
- netstat -tan
- nmap -v ip : Saber puertos abiertos de la ip seleccionada
- nmap -iL ~/networks.txt : Ruta del fichero que hemos creado con la lista de ips a escanear
- sudo iptables -L -n : No traduce ips ni puertos
- whois NOMBRE_DOMINIO : Informacion sobrte el dominio
- awk '{print $numero_columna}' : Imprimir la columna selecionada
- rev : Da la vuelta a un texto, la ultima colomna pasa a ser la primera
- sudo tcpdump -w conexiones.log : Crear un fichero con los datos de las conexiones
- sudo tcpdump -r conexiones.log : Ver el fichero que hemos creado anteriormente
- source : Obtener datos de otro archivo en bash, por ejemplo de un archivo con variables
- sync; echo 3>/proc/sys/vm/drop_caches : Limpiar caches
- cat /dev/null > archivo : Vaciar archivos
- >/dev/null 2>&1 : Para que no se obtenga info de la salida standar y la de error 
- chsh -s /usr/bin/bash : Cambiar el shell del usuario, hay que poner la ruta del shell al que se quiere cambiar
- tr : Sustitucion de caracteres
- split : Sirve para separar archivos grandes en partes mas pequenas, ejemplo split -b 1g prueba.tar . Para volver a unirlos usariamos el comando cat. Ejemplo cat prueba1 prueba2 prueba3 ...
- fsck : Verificar y reparar errores en el sistema de archivos
- nslookup HOST : Muestra la ip del host
- cat /etc/lsb-release : Saber version del S.O
- sudo apt install --only-upgrade NOMBRE_PAQUETE : Actualiza solo el paquete indicado
- rm -rf /var/lib/apt/list/* : Elimanr las listas creadas por apt update
- ssh-copy-id -i ~/.ssh/id_rsa.pub IP_DESTINO : Enviar el acceso rsa a un host
- htpasswd FICHERO USUARIO : Crea una password encriptada en el fichero
- lastlog : Saber el ultimo login
- sudo dd if=origen of=destino : Copiar una ISO en usb
- sudo dd if=/dev/zero of=archivo_nuevo bs=1024 count=1M : Crear un archivo vacio de 1Gb
- blkid : Saber id discos
- sudo logrotate -f : Rotar los log manualmente.
- sudo logrotate ARCHIVO_CONF --debug : Simular un rotado de logs
